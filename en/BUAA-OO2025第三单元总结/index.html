<!DOCTYPE html>
<html lang="en">

<!-- Head tag (contains Google-Analytics、Baidu-Tongji)-->
<head>
  <!-- Google Analytics -->
  
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-xxxxxx-xx"></script>
    <script type="text/javascript">
      window.dataLayer = window.dataLayer || [];

      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'UA-xxxxxx-xx');
    </script>
  

  <!-- Baidu Tongji -->
  
    <script type="text/javascript">
      // Originial
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  <!-- Baidu Push -->
  
    <script>
      (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
      })();
    </script>
  

  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

  <meta name="google-site-verification" content="lxDfCplOZbIzjhG34NuQBgu2gdyRlAtMB4utP5AgEBc"/>
  <meta name="baidu-site-verification" content="PpzM9WxOJU"/>

  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="It&#39;s a private blog about a human being, welcome to subscribe!"/>
  <meta name="keyword" content="Learning,living,gaming"/>
  <link rel="shortcut icon" href="/img/avatar/roguerabbit.jpg"/>

  <!-- Place this tag in your head or just before your close body tag. -->
  <script async="async" defer="defer" src="https://buttons.github.io/buttons.js"></script>

  
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/beantech.min.css"/>

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css"/>
    <link rel="stylesheet" href="/css/widget.css"/>
    <link rel="stylesheet" href="/css/rocket.css"/>
    <link rel="stylesheet" href="/css/signature.css"/>
    <link rel="stylesheet" href="/css/catalog.css"/>
    <link rel="stylesheet" href="/css/livemylife.css"/>

    
      <!-- wave start -->
      <link rel="stylesheet" href="/css/wave.css"/>
      <!-- wave end -->
    

    
      <!-- top start (article top hot config) -->
      <link rel="stylesheet" href="/css/top.css"/>
      <!-- top end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/scroll.css"/>
      <!-- ThemeColor end -->
    

    
      <!-- viewer start (Picture preview) -->
      <link rel="stylesheet" href="/css/viewer.min.css"/>
      <!-- viewer end -->
    

    
      <!-- Search start -->
      <link rel="stylesheet" href="/css/search.css"/>
      <!-- Search end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/themecolor.css"/>
      <!-- ThemeColor end -->
    

    

    
  

  <!-- Custom Fonts -->
  <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
  <!-- Hux change font-awesome CDN to qiniu -->
  <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" type="text/css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Hux Delete, sad but pending in China <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'> <link
  href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/ css'> -->

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script> <![endif]-->

  <!-- ga & ba script hoook -->
  <link rel="canonical" href="http://s7am1na.github.io/en/BUAA-OO2025第三单元总结/">
  <title>
    
      BUAA-OO2025第三单元总结 - just a private corner
    
  </title>
<meta name="generator" content="Hexo 5.4.2"></head>


<!-- hack iOS CSS :active style -->

	<body ontouchstart="" class="body--light body--dark">


		<!-- ThemeColor -->
		
		<!-- ThemeColor -->
<style type="text/css">
  .body--light {
    --light-mode: none;
    --dark-mode: block;
  }
  .body--dark {
    --light-mode: block;
    --dark-mode: none;
  }
  i.mdui-icon.material-icons.light-mode {
    display: var(--light-mode);
  }
  i.mdui-icon.material-icons.dark-mode {
    display: var(--dark-mode);
  }
</style>
<div class="toggle" onclick="document.body.classList.toggle('body--dark')">
  <i class="mdui-icon material-icons light-mode"></i>
  <i class="mdui-icon material-icons dark-mode"></i>
</div>
<script>
  //getCookieValue
  function getCookieValue(a) {
    var b = document.cookie.match('(^|[^;]+)\\s*' + a + '\\s*=\\s*([^;]+)');
    return b
      ? b.pop()
      : '';
  }
  let themeMode = 'dark';
  if (getCookieValue('sb-color-mode') && (getCookieValue('sb-color-mode') !== themeMode)) {
    let dbody = document.body.classList;
    themeMode === 'dark' ? dbody.remove('body--dark') : dbody.add('body--dark');
  }

  //setCookieValue
  var toggleBtn = document.querySelector(".toggle");
  toggleBtn.addEventListener("click", function () {
    var e = document.body.classList.contains("body--dark");
    var cookieString = e
      ? "dark"
      : "light";
    var exp = new Date();
    exp.setTime(exp.getTime() + 3 * 24 * 60 * 60 * 1000); //3天过期
    document.cookie = "sb-color-mode=" + cookieString + ";expires=" + exp.toGMTString() + ";path=/";
  });
</script>

		

		<!-- Gitter -->
		
		<!-- Gitter -->
<!-- Docs:https://gitter.im/?utm_source=left-menu-logo -->
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'your-community/your-room'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>

		

		<!-- Navigation (contains search)-->
		<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">
        S7的温柔时空角
      </a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <!-- Known Issue, found by Hux: <nav>'s height woule be hold on by its content. so, when navbar scale out, the <nav> will cover tags. also mask any touch event of tags, unfortunately. -->
    <div id="huxblog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/">
              HOME
            </a>
          </li>

          
            
                
            
              <li>
                <a href="/tags/">
                  
                                TAGS
                                  
                                    
                </a>
              </li>
              
                
            
              <li>
                <a href="/categories/">
                  
                            CATEGORIES
                              
                                    
                </a>
              </li>
              
                
            
              <li>
                <a href="/archive/">
                  
                    ARCHIVES
                      
                                    
                </a>
              </li>
              
                
            
              <li>
                <a href="/about/">
                  
                        ABOUT
                          
                                    
                </a>
              </li>
              
                

                  
                    <li>
                      <a class="popup-trigger">
                        <span class="search-icon"></span>
                        SEARCH
                      </a>
                    </li>
                    

                      <!-- LangSelect -->
                      
                        
                          
                                
                                      
        </ul>
      </div>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container -->
</nav>
<!-- progress -->
<div id="progress">
  <div class="line" style="width: 0%;"></div>
</div>

<script>
  // Drop Bootstarp low-performance Navbar Use customize navbar with high-quality material design animation in high-perf jank-free CSS3 implementation
  var $body = document.body;
  var $toggle = document.querySelector('.navbar-toggle');
  var $navbar = document.querySelector('#huxblog_navbar');
  var $collapse = document.querySelector('.navbar-collapse');

  $toggle.addEventListener('click', handleMagic)

  function handleMagic(e) {
    if ($navbar.className.indexOf('in') > 0) {
      // CLOSE
      $navbar.className = " ";
      // wait until animation end.
      setTimeout(function () {
        // prevent frequently toggle
        if ($navbar.className.indexOf('in') < 0) {
          $collapse.style.height = "0px"
        }
      }, 400)
    } else {
      // OPEN
      $collapse.style.height = "auto"
      $navbar.className += " in";
    }
  }
</script>

		<!-- Post Header (contains intro-header、signature、wordcount、busuanzi、waveoverlay) -->
		<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->

  <style type="text/css">
    .body--light {
      /* intro-header */
      --intro-header-background-image-url-home: url('/img/header_img/categories_bg.WebP');
      --intro-header-background-image-url-post: url('/img/header_img/MVP!.webp');
      --intro-header-background-image-url-page: url('//img/header_img/MVP!.webp');
    }
    .body--dark {
      --intro-header-background-image-url-home: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/categories_bg.WebP');
      --intro-header-background-image-url-post: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/MVP!.webp');
      --intro-header-background-image-url-page: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('//img/header_img/MVP!.webp');
    }

    header.intro-header {
       /*post*/
        background-image: var(--intro-header-background-image-url-post);
        /* background-image: url('/img/header_img/MVP!.webp'); */
      
    }

    
  </style>





<header class="intro-header">
  <!-- Signature -->
  <div id="signature">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          
          <div class="post-heading">
            <div class="tags">
              
              <a class="tag" href="/tags/#OO" title="OO">OO</a>
              
            </div>
            <h1>BUAA-OO2025第三单元总结</h1>
            <h2 class="subheading">Gemini2.5拿了MVP！S7AM1NA是townInGo！</h2>
            <span class="meta">
              Posted by John Doe on
              2025-05-17
            </span>


            
            <!-- WordCount start -->
            <div class="blank_box"></div>
            <span class="meta">
              Estimated Reading Time <span class="post-count">17</span> Minutes
            </span>
            <div class="blank_box"></div>
            <span class="meta">
              Words <span class="post-count">5k</span> In Total
            </span>
            <div class="blank_box"></div>
            <!-- WordCount end -->
            
            
            <!-- 不蒜子统计 start -->
            <span class="meta" id="busuanzi_container_page_pv">
              Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
            </span>
            <!-- 不蒜子统计 end -->
            


          </div>
          
        </div>
      </div>
    </div>
  </div>

  
  <!-- waveoverlay start -->
  <div class="preview-overlay">
    <svg class="preview-waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
      <defs>
        <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path>
      </defs>
      <g class="preview-parallax">
        <use xlink:href="#gentle-wave" x="48" y="0" fill=var(--gentle-wave1)></use>
        <use xlink:href="#gentle-wave" x="48" y="3" fill=var(--gentle-wave2)></use>
        <use xlink:href="#gentle-wave" x="48" y="5" fill=var(--gentle-wave3)></use>
        <use xlink:href="#gentle-wave" x="48" y="7" fill=var(--gentle-wave)></use>
      </g>
    </svg>
  </div>
  <!-- waveoverlay end -->
  

</header>



		<!-- Main Content (Post contains
	Pager、
	tip、
	socialshare、
	gitalk、gitment、disqus-comment、
	Catalog、
	Sidebar、
	Featured-Tags、
	Friends Blog、
	anchorjs、
	) -->
		<!-- Modify by Yu-Hsuan Yen -->
<!-- MathJax v3（推荐） -->
<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
    }
  };
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div class="col-lg-8 col-lg-offset-1 col-md-10 col-md-offset-1 post-container">

        <h1 id="buaa-oo2025第三单元总结">BUAA-OO2025第三单元总结</h1>
<h2 id="前言">前言</h2>
<p>​
本月的OO比之前的强度低了一些🤭，但是刚好也是遇到冯如杯的一个月，整体感觉很充实。而我们的面向对象变得相当亲民，提升了我们对<strong>算法与数据结构</strong>的认知，也让我们了解到了<strong>JML规格设计与测试</strong>的要点。</p>
<h2 id="一-测试过程">一 测试过程</h2>
<h3
id="对测试类型的理解及在本单元的应用"><strong>1、对测试类型的理解及在本单元的应用</strong></h3>
<ul>
<li><p><strong>单元测试 :</strong></p>
<p>单元测试是针对程序中最小的可测试单元（通常是类中的一个方法，或者一个独立的类）进行的测试。目标是验证这个单元在<strong>隔离的环境</strong>下是否能按预期工作。例如我们本单元为<code>queryBestAcquaintance</code>设计了很多单元测试用例。这是保证每个组件质量的基础。如果单元都有问题，集成起来必然问题更多。</p></li>
<li><p><strong>功能测试 :</strong></p>
<p>基于 JML
和指令说明，验证软件的各项功能是否按预期工作。它通常是黑盒测试，不关心内部实现，只关心输入和输出是否匹配规格。</p></li>
<li><p><strong>集成测试 :</strong></p>
<p><strong>在单元测试的基础上</strong>，将已测试的模块组合起来，测试它们之间的接口和交互是否正确。目标是发现模块间协作时可能出现的问题。通常是自底向上（先测试基础类，再测试依赖它们的类）。</p></li>
<li><p><strong>压力测试 :</strong></p>
<p>测试系统在极端负载（大量数据、高并发、长时间运行）下的稳定性和性能。目标是找出系统的瓶颈和在崩溃点。主要有两种测试方法：一是通过构造巨大数据量，如大量<code>Person</code>或者<code>Relation</code>，提高程序的运行压力；二是通过高频使用复杂的操作，如<code>qts</code>,<code>qcs</code>与
<code>qsp</code>。二者都可以一定程度上挑战我们的CTLE，这也正是我们强测所关注的。</p></li>
<li><p><strong>回归测试:</strong></p>
<p>在对软件进行了修改（Bug修复、功能增强）之后，重新运行之前的测试用例，以确保新的修改没有引入新的错误，或者没有使之前已修复的错误再次出现。</p></li>
</ul>
<h3 id="数据构造策略"><strong>2. 数据构造策略 </strong></h3>
<ul>
<li><strong>初始阶段 (基本功能实现):</strong>
<ul>
<li><strong>简单、直接的有效数据:</strong> 构造能触发方法
normal_behavior
的最基本输入。例如，<code>ap 1 A 20</code>，<code>ap 2 B 20</code>，<code>ar 1 2 10</code>，<code>qv 1 2</code>。</li>
<li><strong>边界值 (针对参数):</strong>
对于有数值参数的指令，测试其边界值。例如 <code>deleteColdEmoji</code> 的
limit 为 0, 1, 恰好等于某个热度,
大于所有热度。<code>modifyRelation</code>的 value 使总值恰好为 0, 1,
-1。</li>
<li><strong>空状态:</strong> 测试对空集合（如空网络、空
Tag、空关注者列表）的操作。</li>
<li><strong>单一元素状态:</strong> 网络中只有一个人，Tag
中只有一个人等。</li>
</ul></li>
<li><strong>JML 异常条件覆盖:</strong>
<ul>
<li>针对 JML 中每个 signals
子句，精心构造<strong>恰好</strong>能触发该异常的最小数据集。例如，<code>addRelation</code>
要构造：id1 不存在、id2 不存在、id1 和 id2 已存在关系这三种情况。</li>
</ul></li>
<li><strong>针对特定逻辑/算法的测试数据:</strong>
<ul>
<li><strong>图算法 (<code>qci</code>, <code>qsp</code>,
<code>qts</code>):</strong>
<ul>
<li>构造不同图结构：链、环、星型、完全图、二分图、不连通图。</li>
<li>测试特殊情况：自环路径 (qci 1 1)，查询到自身的距离 (qsp 1 1)。</li>
</ul></li>
<li><strong>ID 优先规则:</strong> 构造关系值/贡献度相等，但 ID
不同，需要通过 ID 排序来确定唯一最佳者/贡献者的情况。</li>
</ul></li>
<li><strong>组合与交互测试:</strong>
<ul>
<li>构造一系列操作，测试不同功能模块之间的交互。例如：
<ul>
<li><code>add_person_to_tag</code> -&gt; <code>modify_relation</code>
(改变 Tag 内成员关系值) -&gt; <code>query_tag_value_sum</code>。</li>
</ul></li>
</ul></li>
<li><strong>随机生成与状态跟踪 (DataGenerator):</strong>
<ul>
<li><strong>优点:</strong>
可以产生大量、多样的测试数据，可能发现手动设计时遗漏的组合。</li>
<li><strong>策略:</strong>
<ul>
<li><strong>维护内部状态:</strong>
生成器内部维护一个简化的网络模型状态（如已存在的 Person ID, Tag ID,
Account ID, 文章, 关系等）。</li>
<li><strong>基于状态生成有效指令:</strong>
尽量生成在当前状态下“有意义”的指令（例如，删除一个已存在的
Tag，而不是随机一个不存在的 Tag ID）。</li>
<li><strong>控制指令分布:</strong>
使用加权随机或其他策略，确保所有指令（包括新旧、常用和不常用）都有机会被生成。可以调整权重以侧重测试新功能或复杂功能。</li>
<li><strong>引入少量错误指令:</strong> 故意生成一些会触发 JML
exceptional_behavior 的指令，测试异常处理。</li>
<li><strong>长指令序列:</strong>
生成足够长的指令序列来测试累积效应和长期运行的稳定性。</li>
<li><strong>“压力块”:</strong>
在随机序列中插入一些特定设计的、用于高强度测试某个复杂查询（如
<code>qcs</code>,
<code>qbc</code>）的指令子序列，在查询前后进行状态修改。</li>
</ul></li>
</ul></li>
</ul>
<h2 id="二-大模型与我们">二 大模型与我们</h2>
<p>​
整体体验感是相当好的，大模型其实几乎能帮助我们做完所有的事情。我在与大模型不断地交流中结合了多种对话方式，包括提出要求、询问建议以及发出质疑，它一般都可以给我不错的答复，这与一两年前的“人工智障”的自我矛盾、死不悔改完全不同了。此外，大模型可以直接根据JML语言生成对应的代码，很大程度上减少了我们在底层代码上的耗时。</p>
<p>​
那么<strong>如何引导大模型在不同场景下完成复杂任务</strong>？我的总结归纳如下：</p>
<ol type="1">
<li><strong>清晰定义问题和目标:</strong>
<ul>
<li><strong>场景1 (JML 实现):</strong> 提供完整的 JML
规格，明确要求“请实现这个方法”。</li>
<li><strong>场景2 (Bug 定位):</strong>
提供精确的错误信息、相关的代码片段、日志、以及我们认为的预期行为。。</li>
<li><strong>场景3 (性能优化):</strong>
指出性能瓶颈所在的方法，提供相关代码，明确优化的目标（例如，“将复杂度从
O(N^2) 降到 O(N)以下”等等）。</li>
<li><strong>场景4 (测试设计):</strong>
明确要测试的功能点、边界条件、以及期望的测试强度。</li>
</ul></li>
<li><strong>提供充足的上下文信息:</strong>
<ul>
<li><strong>相关的 JML 规格:</strong>
对于任何涉及接口或方法行为的讨论，JML 都是绝对标准。</li>
<li><strong>相关的代码片段:</strong>
只给方法签名通常不够，我们需要提供相关的实现逻辑。</li>
<li><strong>数据结构定义:</strong> 当讨论到 Map、List、Set
或自定义数据结构时，明确其 Key-Value 类型和用途。</li>
</ul></li>
<li><strong>采用迭代和交互的方式:</strong>
<ul>
<li><strong>不要期望一次完美。</strong>
把复杂任务分解成小步骤，逐步推进，ai在直面复杂任务的时候能力也很有限。</li>
<li><strong>对模型回答进行追问和质疑。</strong>
大模型有时候的回复不一定准确无误，<strong>不可盲信！！</strong>这要求我们对他们的输出运用批判性思维。<strong>我们需要利用，而不是依靠。</strong></li>
</ul></li>
<li><strong>主导方向，利用模型作为辅助工具:</strong>
<ul>
<li><strong>我们是项目的主人。</strong>
我们对整体架构、核心难点有更深的理解。利用模型来完成具体的代码生成、逻辑分析、信息检索等任务，而不是直接把所有事情都交给它。</li>
<li><strong>提出假设，让模型验证或提供实现。</strong>
例如我们想用TreeSet存储数据以提高性能，我们可以提出并询问它是否有可行性，是否有可观的提升。</li>
<li><strong>当模型给出多个选项时，我们来做决策。</strong>
例如，关于增量开发或缓存策略，大模型可能给出几种方案及其优缺点，最终选择权在我们手里。</li>
</ul></li>
</ol>
<h2 id="三-架构设计">三 架构设计</h2>
<h3 id="uml类图">1、UML类图</h3>
<p><img src="架构类图.svg" /></p>
<h3 id="图模型组成">2、图模型组成</h3>
<ul>
<li><strong>核心社交网络图:</strong> 主要通过 Network 类中的
<code>personMap</code>（存储 Person 节点）和 Person 类内部的
<code>sortedAcquaintances (TreeSet)</code> 及
<code>acquaintanceIdToEntryMap</code>（存储熟人关系边及其权重）来构建。<code>addPerson</code>
指令添加节点，<code>addRelation</code> 和 <code>modifyRelation</code>
指令构建和修改边。</li>
<li><strong>Tag-Person 成员关系图:</strong> Person 对象通过其内部的
<code>tags Map</code> 持有它拥有的 Tag 对象。Tag 对象通过其内部的
<code>personMap</code> 记录它的成员 Person。Network 类还维护一个反向索引
<code>personIdToMemberOfTagsMap</code>，用于记录一个 Person
作为成员出现在哪些具体的 Tag 实例中，方便在关系变化时更新相关的 Tag
状态。</li>
<li><strong>OfficialAccount 关注与贡献图:</strong> OfficialAccount
类内部通过 <code>followersMap</code> 构建关注关系，并通过
<code>contributionsMap</code> 和
<code>sortedContributors (TreeSet)</code>记录和管理关注者的贡献度及最佳贡献者。</li>
<li><strong>消息与实体关联:</strong> 通过 Network 中的
<code>allMessagesMap</code> 存储所有消息。Person 的
<code>messagesList</code> 记录其接收到的消息。Network 的
<code>articleToContributorMap</code> 和 <code>emojiToMessagesMap</code>
分别将文章和 Emoji 与相关的 Person 或 Message
关联起来，用于特定功能的实现和优化。</li>
<li><strong>辅助图算法的输入:</strong> <code>GraphAlgorithms</code>
类直接接收 Network 的 <code>personMap</code>
作为其操作图结构的输入，用于执行如路径查找、连通性判断和三元环计数等算法。</li>
</ul>
<h3 id="维护策略">3、维护策略</h3>
<ul>
<li><strong>直接存储与索引:</strong> 对 Person、OfficialAccount、全局
Message、全局 Emoji 使用 <code>HashMap</code> 进行 ID
到对象的直接存储和快速查找。</li>
<li><strong>有序集合优化查询:</strong> 在 Person（最佳熟人）和
OfficialAccount（最佳贡献者）内部使用 <code>TreeSet</code>
来自动维护排序，使得相关查询非常高效。</li>
<li><strong>反向索引:</strong>
<ul>
<li><code>Network.personIdToMemberOfTagsMap</code>:
用于在关系变化时快速定位受影响的 Tag，用于优化qtvs。</li>
<li><code>Network.emojiToMessagesMap</code>: 用于在删除冷门 Emoji
时快速定位并删除相关的消息。</li>
</ul></li>
<li><strong>增量更新缓存:</strong>
<code>Tag.getValueSum</code>与<code>Network.triSum</code>
等复杂的query对象采用增量更新策略，以避免大量查询导致CTLE。</li>
</ul>
<h2 id="四-出现的性能问题与修复情况">四 出现的性能问题与修复情况</h2>
<ol type="1">
<li><strong><code>Person.queryBestAcquaintance()</code> :</strong>
<ul>
<li><strong>初始问题:</strong> 如果每次调用都遍历所有熟人
(O(degree))，在 Network.queryCoupleSum() (O(N) 次调用) 中会导致整体 O(N
* degree) 甚至 O(N^2) 的复杂度，容易超时。</li>
<li><strong>第一次迭代优化 (手动缓存):</strong> 我们引入了
<strong>bestAcquaintanceId</strong>,
<strong>bestAcquaintanceValue</strong>, <strong>isValid</strong>
手动缓存。
<ul>
<li><strong>优点:</strong> 缓存命中时 O(1)。</li>
<li><strong>不足:</strong> 缓存更新逻辑（特别是 addAcquaintance 和
modifyValue 中值变小或删除最佳者时）复杂且容易出错，如果频繁失效导致重算
(O(degree))，性能仍然不稳定。。</li>
</ul></li>
<li><strong>第二次迭代优化 (TreeSet):</strong> 最终方案是使用
TreeSet<AcquaintanceEntry> (配合辅助 Map acquaintanceIdToEntryMap)
来自动维护熟人的排序。
<ul>
<li><strong>修复效果:</strong> <code>queryBestAcquaintance</code> 变为
O(log degree) 或 O(1) (取 TreeSet.first())。<code>addAcquaintance</code>
和 <code>modifyValue</code> 的复杂度也稳定在 O(log
degree)。这显著提升了依赖此方法的 <code>queryCoupleSum</code>
的性能。</li>
</ul></li>
</ul></li>
<li><strong><code>Network.queryCoupleSum()</code>:</strong>
<ul>
<li><strong>初始问题:</strong> 如果采用朴素的双重循环遍历所有 Person 对
(O(N^2))，并且内部调用未优化的 queryBestAcquaintance
(O(degree))，则总复杂度可能高达 O(N^2 * degree) 或 O(N^3)。</li>
<li><strong>第一次迭代优化 (算法层面):</strong>
将双重循环改为单层循环遍历 Person i -&gt; 找 best(i)=j -&gt; 找
best(j)=k -&gt; 比较 k==i。</li>
<li><strong>结合 Person 的 TreeSet 优化:</strong> 如第一点所述。</li>
</ul></li>
<li><strong><code>Person.removeReceivedArticle(int articleId)</code> (在
Network.deleteArticle 中被调用):</strong>
<ul>
<li><strong>初始问题:</strong> 如果 Person 的
<code>receivedArticles</code> 使用 LinkedList<Integer> 实现，那么
<code>removeFirstOccurrence</code> 或 <code>removeIf</code>
来删除（所有）匹配项的复杂度是 O(L) (L 为列表长度)。在
<code>Network.deleteArticle 中</code>，遍历 F 个关注者，每个都执行 O(L)
操作，导致通知部分为 O(F*L)，可能超时。</li>
<li><strong>迭代优化 (自定义双向链表 + Map 索引):</strong>
我们设计了使用 Map&lt;Integer, LinkedList<Node>&gt;
<code>articleIdToNodesMap</code> 配合自定义双向链表节点 Node 的方案。
<ul>
<li>addReceivedArticle 保持 O(1)。</li>
<li>removeReceivedArticle (删除所有匹配项) 的复杂度优化为 O(K)，K 是特定
articleId 的重复次数。这在 K 远小于 L 时是显著的优化。</li>
<li><strong>修复效果:</strong> <code>Network.deleteArticle</code>
通知部分的复杂度从 O(F·L) 改善为 O(F·K_avg)，平均情况下 K_avg
通常较小。</li>
</ul></li>
</ul></li>
<li><strong><code>Tag.getValueSum()</code>:</strong>
<ul>
<li><strong>初始问题:</strong> 每次调用都进行 O(S^2) 的双重循环计算 (S
为 Tag 内人数)，在
<code>queryTagValueSum</code>被频繁调用时会超时。</li>
<li><strong>迭代优化 (增量缓存 + Network 通知):</strong>
<ul>
<li>Tag 内部维护 <code>cachedValueSum</code>。</li>
<li>Tag.addPerson 和 Tag.delPerson 进行 O(S) 的增量更新
<code>cachedValueSum</code>。</li>
<li>Network.addRelation 和 Network.modifyRelation 负责找到受影响的 Tag
(那些同时包含关系双方的 Tag)，并调用 Tag 新增的
<code>adjustValueSumForExternalRelationChange(p1Id, p2Id, valueChange)</code>
方法，该方法对 <code>cachedValueSum</code>进行 O(1) 的调整。</li>
<li><strong>修复效果:</strong> Tag.getValueSum() 变为 O(1) 查询。代价是
addPerson/delPerson 变为 O(S)，addRelation/modifyRelation
需要额外的逻辑来查找和通知 Tag。</li>
</ul></li>
</ul></li>
<li><strong><code>Network.queryTripleSum()</code>:</strong>
<ul>
<li><strong>初始问题:</strong> 最初的实现是 O(N^3) 或 O(N^2 *
degree)，这是非常高的复杂度，极易超时。</li>
<li><strong>优化方向:</strong> 遍历节点再遍历其邻居对 (O(N *
avg_degree^2))，并且对<code>triSum</code>进行增量更新。</li>
</ul></li>
<li><strong><code>Network.isCircle()</code> 和
<code>Network.queryShortestPath()</code>:</strong>
<ul>
<li><strong>当前实现:</strong> 单向 BFS，复杂度 O(N+M)。</li>
<li><strong>优化方向 :</strong> 双向 BFS
可以显著改善实际运行时间（常数因子），但最坏复杂度不变。对于无权图，BFS
已是较优算法，因此没有使用双向BFS。</li>
</ul></li>
</ol>
<h2 id="五-规格与实现分离">五 规格与实现分离</h2>
<p>规格与实现分离是软件工程中的核心原则，旨在提高代码的<strong>模块化</strong>、<strong>可维护性</strong>、<strong>可测试性</strong>和<strong>可重用性</strong>。通过这个单元的学习，我对这个原则有了更具体的体会：</p>
<ol type="1">
<li><strong>接口 (JML 规格) 定义了“做什么” :</strong>
<ul>
<li>JML
规格扮演了<strong>契约</strong>的角色。它精确地定义了一个组件应该提供的功能、它能接受的输入<strong>（requires）</strong>、它保证产生的输出或状态改变<strong>（ensures）</strong>、它可能修改的状态<strong>（assignable）</strong>以及它在异常情况下应该如何表现<strong>（signals）</strong>。</li>
<li>当我们严格对照 JML 来<strong>设计和 Debug</strong> 时（比如
deleteArticle 的异常顺序，红包消息的 socialValue
计算），思路会更清晰，也更容易发现与JML不符的地方。</li>
</ul></li>
<li><strong>实现定义了“怎么做” :</strong>
<ul>
<li>我们需要实现的类则关注如何高效、正确地达成 JML
规定的目标。我们可以自由选择内部数据结构和算法，只要最终的外部行为符合
JML 即可。</li>
<li>这种分离给了我们优化的空间，也是我们这个单元主要考察内容之一吧。当我们发现
<code>queryBestAcquaintance</code> 性能不足时，我们可以<strong>只修改
Person 类的内部实现</strong>（从手动缓存到 TreeSet），而不需要修改 JML
规格。</li>
</ul></li>
<li><strong>分离带来的好处:</strong>
<ul>
<li><strong>模块化:</strong> 基于JML每个组件可以独立开发和测试。我们对
Person 进行单元测试，确保其缓存正确，然后再集成到 Network 中。</li>
<li><strong>可维护性:</strong>
修改一个组件的内部实现（例如优化算法）不应该影响到其他依赖其接口的组件。</li>
<li><strong>可测试性:</strong>
<ul>
<li><strong>单元测试:</strong>
可以针对实现类进行白盒测试，验证其内部逻辑。</li>
<li><strong>基于接口的测试/功能测试:</strong> 可以只依赖接口和 JML
编写测试用例，验证任何符合该接口的实现是否都表现正确。</li>
</ul></li>
</ul></li>
</ol>
<h2 id="六-规格与junit">六 规格与Junit</h2>
<h3 id="利用规格设计实现junit测试">1、利用规格设计实现Junit测试</h3>
<ol type="1">
<li><strong>测试正常行为 (normal_behavior):</strong>
<ul>
<li><strong>根据 requires 子句构造有效输入:</strong> JML 的 requires
子句定义了方法正常执行的前提条件。测试时，应构造满足这些前提条件的输入数据和对象状态。</li>
<li><strong>根据 ensures 子句验证输出和状态变化:</strong> JML 的 ensures
子句描述了方法成功执行后必须达成的状态或返回结果。JUnit 的断言
(assertEquals, assertTrue, assertFalse 等)
就应该用来验证这些后置条件。</li>
<li><strong>考虑边界值和等价类:</strong> 即使 JML
没有明确列出所有边界，但基于 requires
中的条件，可以推断出参数的有效范围和边界情况。</li>
</ul></li>
<li><strong>测试异常行为 (exceptional_behavior):</strong>
<ul>
<li><strong>根据 signals (或 signals_only)
子句构造触发异常的输入:</strong> JML 的 signals
子句定义了在何种条件下方法应该抛出何种异常。测试时，应精确构造这些条件。</li>
<li><strong>使用 JUnit4 的异常测试机制验证异常类型和内容。</strong></li>
<li><strong>测试异常的优先级:</strong> 如果 JML 定义了多个
exceptional_behavior
块，它们的顺序通常表明了检查和抛出异常的优先级。测试用例应该尝试验证这种优先级。</li>
</ul></li>
<li><strong>测试不变式 (invariant):</strong>
<ul>
<li>不变式定义了对象在任何稳定状态下都必须满足的属性。所有会修改对象状态的<strong>非构造方法</strong>，在执行完毕后，对象都必须仍然满足其不变式。构造方法执行完毕后，对象必须满足不变式。</li>
<li><strong>测试策略:</strong> 在调用了那些会修改对象状态的 public
方法之后，设计断言来检查对象是否仍然符合其类 JML 中定义的不变式。</li>
</ul></li>
<li><strong>测试 assignable (可修改项) 和 pure 约束:</strong>
<ul>
<li><strong>assignable 或 /*@ pure @*/:</strong>
这些方法不应修改任何可观察状态。
<ul>
<li><strong>测试策略:</strong>
二者都需要利用<strong>深拷贝</strong>验证对象是否完全没有改变。</li>
</ul></li>
<li><strong>assignable <locations>;</strong>:
这些方法只允许修改指定的模型字段。
<ul>
<li><strong>测试策略:</strong> 除了验证 ensures
子句描述的状态变化确实发生外，还要验证<strong>未被列在 assignable
中的状态确实没有改变</strong>。这通常与 pure
方法的测试类似，需要<strong>深克隆</strong>比较调用前后的状态。</li>
</ul></li>
</ul></li>
</ol>
<h3 id="junit-测试检验代码实现与规格的一致性">2、JUnit
测试检验代码实现与规格的一致性</h3>
<p>​ JUnit 测试是验证代码实现是否符合 JML
规格的重要手段，其优势效果明显：</p>
<ol type="1">
<li><strong>自动化验证:</strong> JUnit
可以自动化地执行大量测试用例，快速反馈代码是否符合预期。</li>
<li><strong>早期发现错误:</strong>
在开发早期阶段通过单元测试发现问题，避免强测凉掉（×。</li>
<li><strong>精确的问题定位:</strong>
良好的单元测试可以帮助快速定位到出错的具体方法或逻辑。</li>
<li><strong>回归保证:</strong> 一旦为某个 Bug
编写了测试用例，或者为某个功能点编写了测试，这些测试就可以在后续修改中持续运行，确保
Bug 不会重现，功能不被破坏。</li>
<li><strong>促进对规格的理解:</strong> 编写 JUnit
测试的过程本身就是一个“强迫”开发者仔细阅读和理解 JML
规格的过程。为了写出好的测试，必须清楚方法的<strong>前提、后置、异常</strong>等。</li>
</ol>
<h2 id="七-学习体会">七 学习体会</h2>
<p>​
OO是一门内容丰富且多元的课程，第三单元也给我们带来了前所未有的学习体验。一句<strong>规格化设计</strong>涵盖了许多需要我们在实操中慢慢体悟的细节。<strong>JML规格</strong>像是一份指导书，或者说是一份严谨的要求，像一个深入项目结构的甲方，很大程度上提升了我们编写代码的确定性与效率。</p>
<p>​
而随着作业的迭代，一次次CTLE后再优化，让我对<strong>规格与实现分离</strong>有了更深的理解，规格接口定义了我们要<strong>做什么</strong>，而<strong>怎么做</strong>、<strong>怎么做得更好</strong>，是由我们开发者考虑的。严丝合缝的规格设定与自由自在的设计实现，这二者相辅相成，让人更加感受到了项目开发的魅力~</p>
<h2 id="后记">后记</h2>
<p>​
这几周的学习强度变化太大，笔者决定要开始自律的一周啦！疑似上个周末玩的太嗨了，学习强度不太高的情况下，我们一定要优先保证睡眠与锻炼的时间呀😊，别让学习耽误了健康的身体，很喜欢<del>沃兹基硕德</del>的一句话：<del>不学习一辈子白过，只学习活不了一辈子</del></p>
<p>​ 本期总结就到这里！感谢你看到这里~我们下期再见！👋</p>


          <hr>
          <!-- Pager -->
          <ul class="pager">
            
              <li class="previous">
                <a href="/en/BUAA-OSLab5学习笔记/" data-toggle="tooltip" data-placement="top"
                  title="BUAA-OSLab5学习笔记">&larr; Previous Post</a>
              </li>
              
                
                  <li class="next">
                    <a href="/en/20250511/" data-toggle="tooltip" data-placement="top"
                      title="20250511">Next Post &rarr;</a>
                  </li>
                  
          </ul>

          
            <!-- tip start -->
            <!-- tip -->
<!-- tip start -->
<div class="tip">
  <p>
    
      If you like this blog or find it useful for you, you are welcome to comment on it. You are also welcome to share this blog, so that more people can participate in it. If the images used in the blog infringe your copyright, please contact the author to delete them. Thank you !
    
  </p>
</div>
<!-- tip end -->

              <!-- tip end -->
              

                
                      <hr>

                      <!-- comments start -->
                      
                        <!-- Waline 评论系统 -->
<link rel="stylesheet" href="https://unpkg.com/@waline/client@v3/dist/waline.css" />
<div id="waline"></div>
<script type="module">
    import { init } from 'https://unpkg.com/@waline/client@v3/dist/waline.js';

    init({
        el: '#waline',
        serverURL: 'https://comments.0mnilink.top',
        placeholder: '在这个无人的角落，留下你的足迹:D',
        avatar: 'mm',
        pageSize: '10',
        visitor: true,
        lang: 'zh-CN,en,default',
        dark: 'html[data-theme="dark"]'
    });
</script>
<style>
  /* 给评论区上方留点空隙，别贴着正文 */
  #waline {
    margin-top: 30px;
    padding: 10px;
  }

  /* 
   * 使用 Waline 官方提供的 CSS 变量来控制大小 
   * 这是最安全的方法，不会破坏布局
   */
  :root {
    /* 基础字号：默认是 14px，这里改成了 16px，你可以试着改成 18px */
    --waline-font-size: 16px !important;

    /* 主题色：保持和你博客一致的蓝色 */
    --waline-theme-color: #0085a1 !important; 
    --waline-active-color: #0085a1 !important;
  }
</style>
                          
                                <!-- comments end -->
                                <hr>

      </div>

      <!-- Catalog: Tabe of Content -->
      <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#buaa-oo2025%E7%AC%AC%E4%B8%89%E5%8D%95%E5%85%83%E6%80%BB%E7%BB%93"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">BUAA-OO2025第三单元总结</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">前言</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%B8%80-%E6%B5%8B%E8%AF%95%E8%BF%87%E7%A8%8B"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">一 测试过程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%AF%B9%E6%B5%8B%E8%AF%95%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%90%86%E8%A7%A3%E5%8F%8A%E5%9C%A8%E6%9C%AC%E5%8D%95%E5%85%83%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-nav-number">1.2.1.</span> <span class="toc-nav-text">1、对测试类型的理解及在本单元的应用</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%95%B0%E6%8D%AE%E6%9E%84%E9%80%A0%E7%AD%96%E7%95%A5"><span class="toc-nav-number">1.2.2.</span> <span class="toc-nav-text">2. 数据构造策略 </span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%BA%8C-%E5%A4%A7%E6%A8%A1%E5%9E%8B%E4%B8%8E%E6%88%91%E4%BB%AC"><span class="toc-nav-number">1.3.</span> <span class="toc-nav-text">二 大模型与我们</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%B8%89-%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1"><span class="toc-nav-number">1.4.</span> <span class="toc-nav-text">三 架构设计</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#uml%E7%B1%BB%E5%9B%BE"><span class="toc-nav-number">1.4.1.</span> <span class="toc-nav-text">1、UML类图</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%9B%BE%E6%A8%A1%E5%9E%8B%E7%BB%84%E6%88%90"><span class="toc-nav-number">1.4.2.</span> <span class="toc-nav-text">2、图模型组成</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E7%BB%B4%E6%8A%A4%E7%AD%96%E7%95%A5"><span class="toc-nav-number">1.4.3.</span> <span class="toc-nav-text">3、维护策略</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%9B%9B-%E5%87%BA%E7%8E%B0%E7%9A%84%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98%E4%B8%8E%E4%BF%AE%E5%A4%8D%E6%83%85%E5%86%B5"><span class="toc-nav-number">1.5.</span> <span class="toc-nav-text">四 出现的性能问题与修复情况</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%BA%94-%E8%A7%84%E6%A0%BC%E4%B8%8E%E5%AE%9E%E7%8E%B0%E5%88%86%E7%A6%BB"><span class="toc-nav-number">1.6.</span> <span class="toc-nav-text">五 规格与实现分离</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%85%AD-%E8%A7%84%E6%A0%BC%E4%B8%8Ejunit"><span class="toc-nav-number">1.7.</span> <span class="toc-nav-text">六 规格与Junit</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%88%A9%E7%94%A8%E8%A7%84%E6%A0%BC%E8%AE%BE%E8%AE%A1%E5%AE%9E%E7%8E%B0junit%E6%B5%8B%E8%AF%95"><span class="toc-nav-number">1.7.1.</span> <span class="toc-nav-text">1、利用规格设计实现Junit测试</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#junit-%E6%B5%8B%E8%AF%95%E6%A3%80%E9%AA%8C%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%E4%B8%8E%E8%A7%84%E6%A0%BC%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7"><span class="toc-nav-number">1.7.2.</span> <span class="toc-nav-text">2、JUnit
测试检验代码实现与规格的一致性</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%B8%83-%E5%AD%A6%E4%B9%A0%E4%BD%93%E4%BC%9A"><span class="toc-nav-number">1.8.</span> <span class="toc-nav-text">七 学习体会</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%90%8E%E8%AE%B0"><span class="toc-nav-number">1.9.</span> <span class="toc-nav-text">后记</span></a></li></ol></li></ol>
        
        </div>
      </aside>
    



        <!-- Sidebar Container -->
        <div class="
                col-lg-8 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

          <!-- Featured Tags -->
          
            <section>
              <!-- no hr -->
              <h5>
                <a href="/tags/">
                  FEATURED TAGS
                </a>
              </h5>
              <div class="tags">
                
                  <a class="tag" href="/tags/#OO" title="OO">
                    OO
                  </a>
                  
              </div>
            </section>
            

              <!-- Friends Blog -->
              
                <hr>
                <h5>
                  FRIENDS
                </h5>
                <ul class="list-inline">

                  
                </ul>
                
        </div>
    </div>
  </div>
</article>



  <!-- anchorjs start -->
  <!-- async load function -->
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script type="text/javascript">
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function(e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  };
</script>
<script type="text/javascript">
  //anchor-js, Doc:http://bryanbraun.github.io/anchorjs/
  async ("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js", function() {
    anchors.options = {
      visible: 'hover',
      placement: 'left',
      // icon: 'ℬ'
      icon: '❡'
    };
    anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
  });
</script>
<style>
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>

    <!-- anchorjs end -->
    

		<!-- Footer (contains ThemeColor、viewer) -->
		<!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
          

          
            <li>
              <a target="_blank" href="https://github.com/S7AM1NA">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

          

          

          

          

          

          

        </ul>
        <p class="copyright text-muted">
          Copyright &copy;
          John Doe
          2025
          
            <br>
            <span id="busuanzi_container_site_pv" style="display:none">
              <i class="fa fa-eye"></i>
              <span id="busuanzi_value_site_pv"></span>
            </span>
            <span class="post-meta-divider">|</span>
            <span id="busuanzi_container_site_uv" style="display:none">
              <i class="fa fa-user"></i>
              <span id="busuanzi_value_site_uv"></span>
            </span>
          
          <br>
          Theme by
          <a target="_blank" rel="noopener" href="http://beantech.org">BeanTech</a>
          <span style="display: inline-block; margin: 0 5px;">
            <i class="fa fa-heart"></i>
          </span>
          re-Ported by
          <a target="_blank" rel="noopener" href="https://v-vincen.life/">Live My Life</a>
          |
          <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=V-Vincen&repo=V-Vincen.github.io&type=star&count=true"></iframe>
        </p>
      </div>
    </div>
  </div>
</footer>

<a id="rocket" href="#top" class=""></a>


  <!-- jQuery -->
  <script type="text/javascript" src="/js/jquery.min.js"></script>
  <!-- Bootstrap Core JavaScript -->
  <script type="text/javascript" src="/js/bootstrap.min.js"></script>
  <!-- Custom Theme JavaScript -->
  <script type="text/javascript" src="/js/hux-blog.min.js"></script>
  <!-- catalog -->
  <script async="true" type="text/javascript" src="/js/catalog.js"></script>
  <!-- totop(rocket) -->
  <script async="true" type="text/javascript" src="/js/totop.js"></script>

  
    <!-- Busuanzi JavaScript -->
    <script async="async" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <!-- Scroll start -->
    <script async="async" type="text/javascript" src="/js/scroll.js"></script>
    <!-- Scroll end -->
  

  
    <!-- LangSelect start -->
    <script type="text/javascript" src="/js/langselect.js"></script>
    <!-- LangSelect end -->
  

  
    <!-- Mouseclick -->
    <script type="text/javascript" src="/js/mouseclick.js" content='The first step is as good as half over...,Laugh and grow fat...,Man proposes God disposes...,When all else is lost the future still remains...,Wasting time is robbing oneself...,Sharp tools make good work...,Cease to struggle and you cease to live...,A friend in need is a friend indeed...,Faith can move mountains...' color='#9933CC,#339933,#66CCCC,#FF99CC,#CCCCFF,#6666CC,#663399,#66CC99,#FF0033'></script>
  

  
    <!-- ribbon -->
    <script type="text/javascript" src="/js/ribbonDynamic.js"></script>
  

  






  <!-- viewer start -->
  <!-- viewer start (Picture preview) -->
  
    <script async="async" type="text/javascript" src="/js/viewer/viewer.min.js"></script>
    <script async="async" type="text/javascript" src="/js/viewer/pic-viewer.js"></script>
  

  <!-- viewer end -->


<script>
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function (e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  }

  // fastClick.js
  async ("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function () {
    var $nav = document.querySelector("nav");
    if ($nav)
      FastClick.attach($nav);
    }
  )
</script>

<!-- Because of the native support for backtick-style fenced code blocks right within the Markdown is landed in Github Pages, From V1.6, There is no need for Highlight.js, so Huxblog drops it officially. -
https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0 - https://help.github.com/articles/creating-and-highlighting-code-blocks/ -->
<!-- <script> async ("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function () { hljs.initHighlightingOnLoad(); }) </script> <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet"> -->

<!-- jquery.tagcloud.js -->
<!-- <script> // only load tagcloud.js in tag.html if ($('#tag_cloud').length !== 0) { async ("http://s7am1na.github.io/js/jquery.tagcloud.js", function () { $.fn.tagcloud.defaults = { // size: { start: 1, end: 1, unit: 'em' }, color: {
start: '#bbbbee', end: '#0085a1' } }; $('#tag_cloud a').tagcloud(); }) } </script> -->


		<!-- Search -->
		
		<div class="popup search-popup local-search-popup">
  <span class="popup-btn-close">
    ESC
  </span>
  <div class="container">
    <div class="row">
      <!-- <div class="col-md-9 col-md-offset-1"> -->
      <div class="col-lg-9 col-lg-offset-1 col-md-10 col-md-offset-1 local-search-content">

        <div class="local-search-header clearfix">

          <div class="local-search-input-wrapper">
            <span class="search-icon">
              <i class="fa fa-search fa-lg" style="margin: 25px 10px 25px 20px;"></i>
            </span>
            <input autocomplete="off" placeholder="SEARCH..." type="text" id="local-search-input">
          </div>
        </div>
        <div id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>


  
    <script src="/js/ziploader.js"></script>
  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    // monitor main search box;
    var onPopupClose = function (e) {
      $('.popup').fadeOut(300);
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $('.popup').fadeIn(300);
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }
    // get search zip version
    $.get('/searchVersion.json?t=' + (+new Date()), function (res) {
      if (localStorage.getItem('searchVersion') !== res) {
        localStorage.setItem('searchVersion', res);
        initSearchJson();
      }
    });

    function initSearchJson() {
      initLoad(['/search.flv'], {
        loadOptions: {
          success: function (obj) {
            localStorage.setItem('searchJson', obj['search.json'])
          },
          error: function (e) {
            return console.log(e)
          }
        },
        returnOptions: {
          'json': TYPE_TEXT
        },
        mimeOptions: {
          'json': 'application/json'
        }
      })
    }
    // search function;
    var searchFunc = function (search_id, content_id) {
      'use strict';
      isfetched = true;
      var datas = JSON.parse(localStorage.getItem('searchJson'));
      // console.log(search_id)
      var input = document.getElementById(search_id);
      var resultContent = document.getElementById(content_id);
      var inputEventFunction = function () {
        var searchText = input.value.trim().toLowerCase();
        var keywords = searchText.split(/[\s\-]+/);
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        var resultItems = [];
        if (searchText.length > 0) {
          // perform local searching
          datas.forEach(function (data) {
            var isMatch = false;
            var hitCount = 0;
            var searchTextCount = 0;
            var title = data.title
              ? data.title.trim()
              : '';
            var titleInLowerCase = title.toLowerCase();
            var content = data.content
              ? data.content.trim().replace(/<[^>]+>/g, "")
              : '';
            var contentInLowerCase = content.toLowerCase();
            var articleUrl = decodeURIComponent(data.url);

            var date = data.date;
            var dateTime = date.replace(/T/, " ").replace(/.000Z/, "");
            var imgUrl = data.header_img;
            


            var indexOfTitle = [];
            var indexOfContent = [];
            // only match articles with not empty titles
            keywords.forEach(function (keyword) {
              function getIndexByWord(word, text, caseSensitive) {
                var wordLen = word.length;
                if (wordLen === 0) {
                  return [];
                }
                var startPosition = 0,
                  position = [],
                  index = [];
                if (!caseSensitive) {
                  text = text.toLowerCase();
                  word = word.toLowerCase();
                }
                while ((position = text.indexOf(word, startPosition)) > -1) {
                  index.push({position: position, word: word});
                  startPosition = position + wordLen;
                }
                return index;
              }
              indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
              indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
            });
            if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
              isMatch = true;
              hitCount = indexOfTitle.length + indexOfContent.length;
            }
            // show search results
            if (isMatch) {
              // sort index by position of keyword
              [indexOfTitle, indexOfContent].forEach(function (index) {
                index.sort(function (itemLeft, itemRight) {
                  if (itemRight.position !== itemLeft.position) {
                    return itemRight.position - itemLeft.position;
                  } else {
                    return itemLeft.word.length - itemRight.word.length;
                  }
                });
              });
              // merge hits into slices
              function mergeIntoSlice(text, start, end, index) {
                var item = index[index.length - 1];
                var position = item.position;
                var word = item.word;
                var hits = [];
                var searchTextCountInSlice = 0;
                while (position + word.length <= end && index.length != 0) {
                  if (word === searchText) {
                    searchTextCountInSlice++;
                  }
                  hits.push({position: position, length: word.length});
                  var wordEnd = position + word.length;
                  // move to next position of hit
                  index.pop();
                  while (index.length != 0) {
                    item = index[index.length - 1];
                    position = item.position;
                    word = item.word;
                    if (wordEnd > position) {
                      index.pop();
                    } else {
                      break;
                    }
                  }
                }
                searchTextCount += searchTextCountInSlice;
                return {hits: hits, start: start, end: end, searchTextCount: searchTextCountInSlice};
              }
              var slicesOfTitle = [];
              if (indexOfTitle.length != 0) {
                slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
              }
              var slicesOfContent = [];
              while (indexOfContent.length != 0) {
                var item = indexOfContent[indexOfContent.length - 1];
                var position = item.position;
                var word = item.word;
                // cut out 100 characters
                var start = position - 20;
                var end = position + 80;
                if (start < 0) {
                  start = 0;
                }
                if (end < position + word.length) {
                  end = position + word.length;
                }
                if (end > content.length) {
                  end = content.length;
                }
                slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
              }
              // sort slices in content by search text's count and hits' count
              slicesOfContent.sort(function (sliceLeft, sliceRight) {
                if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                  return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                  return sliceRight.hits.length - sliceLeft.hits.length;
                } else {
                  return sliceLeft.start - sliceRight.start;
                }
              });
              // select top N slices in content
              var upperBound = parseInt('1');
              if (upperBound >= 0) {
                slicesOfContent = slicesOfContent.slice(0, upperBound);
              }
              // highlight title and content
              function highlightKeyword(text, slice) {
                var result = '';
                var prevEnd = slice.start;
                slice.hits.forEach(function (hit) {
                  result += text.substring(prevEnd, hit.position);
                  var end = hit.position + hit.length;
                  result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                  prevEnd = end;
                });
                result += text.substring(prevEnd, slice.end);
                return result;
              }
              var resultItem = '';

              // if (slicesOfTitle.length != 0) {   resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>"; } else {   resultItem += "<li><a target='_blank' href='" +
              // articleUrl + "' class='search-result-title'>" + title + "</a>"; } slicesOfContent.forEach(function (slice) {   resultItem += "<a target='_blank' href='" + articleUrl + "'><p class=\"search-result\">" + highlightKeyword(content, slice) +
              // "...</p></a>"; }); resultItem += "</li>";

              if (slicesOfTitle.length != 0) {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</div><time class='search-result-date'>" + dateTime + "</time>";
              } else {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + title + "</div><time class='search-result-date'>" + dateTime + "</time>";
              }
              slicesOfContent.forEach(function (slice) {
                resultItem += "<p class=\"search-result-content\">" + highlightKeyword(content, slice) + "...</p>";
              });
              resultItem += "</div><div class='search-result-right'><img class='media-image' src='" + imgUrl + "' width='64px' height='48px'></img></div></a>";

              resultItems.push({item: resultItem, searchTextCount: searchTextCount, hitCount: hitCount, id: resultItems.length});
            }
          })
        };

        if (keywords.length === 1 && keywords[0] === "") {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else if (resultItems.length === 0) {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else {
          resultItems.sort(function (resultLeft, resultRight) {
            if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
              return resultRight.searchTextCount - resultLeft.searchTextCount;
            } else if (resultLeft.hitCount !== resultRight.hitCount) {
              return resultRight.hitCount - resultLeft.hitCount;
            } else {
              return resultRight.id - resultLeft.id;
            }
          });
          var searchResultList = '<div class=\"search-result-list\">';
          resultItems.forEach(function (result) {
            searchResultList += result.item;
          })
          searchResultList += "</div>";
          resultContent.innerHTML = searchResultList;
        }
      }
      if ('auto' === 'auto') {
        input.addEventListener('input', inputEventFunction);
      } else {
        $('.search-icon').click(inputEventFunction);
        input.addEventListener('keypress', function (event) {
          if (event.keyCode === 13) {
            inputEventFunction();
          }
        });
      }
      // remove loading animation
      $('body').css('overflow', '');
      proceedsearch();
    }
    // handle and trigger popup window;
    $('.popup-trigger').click(function (e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc('local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });
    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function (e) {
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 && $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });

    document.addEventListener('mouseup', (e) => {
      var _con = document.querySelector(".local-search-content");
      if (_con) {
        if (!_con.contains(e.target)) {
          onPopupClose();
        }
      }
    });
  </script>


		
	<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
